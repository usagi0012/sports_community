<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>동아리 전체 페이지</title>
        <link rel="stylesheet" href="css/club.css" />
    </head>
    <body>
        <div class="club">
            <button onclick="moveToCreateClub()">동아리 생성</button>
            <button onclick="moveToGetMyClubApplication()">
                내 동아리 신청서 조회
            </button>
        </div>

        <div class="title">
            <div>번호</div>
            <div>동아리명</div>
            <div>지역</div>
            <div>동아리장</div>
            <div>점수</div>
        </div>
        <div class="club-list"></div>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script type="module" src="./js/club.js"></script>
        <!-- <script src="./js/club-detail.js"></script> -->
        <script>
            function moveToCreateClub() {
                // 동아리 생성 페이지 이동 전 로그인이 되어 있는지 확인
                // const authorized = localStorage.getItem("authorized");
                // const token = JSON.parse(authorized).accessToken.value;
                const token = localStorage.getItem("accessToken");
                console.log("토큰", token);
                axios
                    .post("/api/club", {
                        headers: {
                            Authorization: `Bearer ${token}`,
                        },
                    })
                    .then(function (response) {
                        console.log(response);
                        window.location.href = `http://localhost:8001/create-club.html`;
                    })
                    .catch(function (error) {
                        console.log(error.response);
                        // if (error.response.data.message === "Unauthorized") {
                        //     alert("로그인이 필요합니다.");
                        //     return;
                        // }
                    });
            }

            function moveToGetMyClubApplication() {
                window.location.href =
                    "http://localhost:8001/my-club-application.html";
            }
        </script>
    </body>
</html>
